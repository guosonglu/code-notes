---
layout: default
title: 面向对象
nav_order: 15
---

# 概述

推荐书籍：[面向对象分析与设计](https://book.douban.com/subject/11509672/)

`面向对象程序设计`（Object-Oriented Programming， 缩写为 OOP）是一种范式，
其基本理念是将`数据`块及与数据相关的`行为`封装成为特殊的、名为`对象`的实体，
同时对象实体的生成工作则是基于程序员给出的一系列“蓝图”，这些“蓝图”就是`类`。

# 对象和类

![](https://cdn.jsdelivr.net/gh/guosonglu/images@master/blog-img/202111171554071.png)

上面是一个UML类图。`类`是生成`对象`实体的`蓝图`。

假如你有一只名为卡卡的猫。卡卡是一个对象，也是猫Cat这个类的一个实例。每只猫都有许多基本属性：
名字name 、性别 sex 、年龄 age 、体重 weight 、毛色color和最爱的食物等。这些都是该类的`成员变量`。

所有猫都有相似的行为：它们会呼吸breathe 、进食eat 、奔跑run 、睡觉sleep和喵喵叫meow 这些都是该类的方法。
成员变量和方法可以统称为类的成员。存储在对象成员变量中的数据通常被称为状态，对象中的所有`方法`则定义了其`行为`。

![](https://cdn.jsdelivr.net/gh/guosonglu/images@master/blog-img/202111171604948.png)

你朋友的猫“露露”也是 猫 这个类的一个实例。它拥有与“卡卡”相同的一组属性。不同之处在于这些属性的值：
她的性别是“女孩”；她的毛色不同；体重较轻。因此类就像是定义对象结构的`蓝图`，而对象则是类的`具体实例`。

# 类层次结构

一些类可能会组织起来形成`类层次结构`。

假如你的邻居有一只名为“福福”的狗。其实狗和猫有很多相同的地方：它们都有名字、性别、年龄和毛色等属性。
狗和猫一样可以呼吸、睡觉和奔跑。因此似乎我们可定义一个动物`Animal`基类来列出它们所共有的`属性`和`行为`。


我们刚刚定义的父类被称为`超类`。 继承它的类被称为`子类`。子类会`继承其父类的状态和行为`，
其中`只需定义不同于父类的属性或行为`。因此，猫 类将包含meow喵喵叫方法,而狗Dog 类则将包含bark汪汪叫方法。

![](https://cdn.jsdelivr.net/gh/guosonglu/images@master/blog-img/202111171609043.png)

假如我们接到一个相关的业务需求，那就可以继续为所有活的生物体Organisms抽取出一个更通用的类，
并将其作为`动物`和`植物`Plants类的超类。这种由各种类组成的金字塔就是`层次结构`。在这个层次结构中，
猫类将继承动物和生物体类的全部内容。

![](https://cdn.jsdelivr.net/gh/guosonglu/images@master/blog-img/202111171611560.png)

子类可以对从父类中继承而来的方法的行为进行`重写`。子类可以完全`替换默认行为`，也可以仅提供`额外内容来对其进行加强`。

# 抽象

`抽象`是一种反映真实世界对象或现象中特定内容的模型，它能高精度地反映所有与特定内容相关的详细信息，同时忽略其他内容。

同一个真实世界的对象可以抽象为不同的模型。

- 真实世界的飞机
  - 飞行模拟器：包含与实际飞行相关的详细信息
  - 航班预订程序：只关心座位图和哪些座位可供预订

![](https://cdn.jsdelivr.net/gh/guosonglu/images@master/blog-img/202111171626805.png)

# 封装

`封装`是指一个对象对其他对象隐藏其部分状态和行为，而仅向程序其他部分暴露有限的接口的能力。

最常见的就是成员变量使用`private`修饰，然后提供`get`和`set`方法。

绝大部分编程语言的`接口`和`抽象类`（或方法）都基于`抽象和封装`的概念。在现代面向对象的编程语言中，
接口机制（通常使用interface或protocol关键字来声明允许你定义对象之间的交互协议。这也是接口`仅关心对象行为`，
以及你`不能在接口中声明成员变量`的原因之一。

举例说明：

假如你的航空运输`FlyingTransport接口`中有一个`fly(origin,destination,passengers)`方法
（即以起点、终点以及乘客为参数的飞行方法）。在设计航空运输模拟器时，你可以对机场Airport类`做出限制`，
使其`仅与实现了航空运输接口的对象进行交互`。此后，你可以确保传递给机场对象的任何对象——无论是飞机、
直升机Helicopter还是可怕的家养狮鹫DomesticatedGryphon——都能到达或离开这种类型的机场。

![](https://cdn.jsdelivr.net/gh/guosonglu/images@master/blog-img/202111171654786.png)

你可以任何方式更改这些类中`fly`方法的实现方式。只要方法签名与接口中的声明保持一致，
那么所有机场类的实例都能与飞行对象进行交互。

# 继承

`继承`是指在根据已有类创建新类的能力。

`继承`最主要的好处是代码复用。如果你想要创建的类与已有的类差异不大，
那也没必要重复编写相同的代码。你只需扩展已有的类并将额外功能放入生成的子类（它会继承父类的成员变量和方法）中即可。

# 多态

`多态`是指程序能够检测对象所属的实际类，并在当前上下文不知道其真实类型的情况下调用其实现的能力。

# 依赖

代码中使用其它具体类的名称时，通常意味着存在`依赖关系`。

`依赖`是类之间最基础的、也是最微弱的关系类型。

通过让代码依赖`接口或抽象类`（而不是具体类），可以降低其依赖程度。

- `依赖`举例
  - 接口参数
  - 局部变量

![](https://cdn.jsdelivr.net/gh/guosonglu/images@master/blog-img/202111171748293.png)

上图表示教授依赖于课程资料

通常情况下，UML图不会展示所有依赖——它们在真实代码中的数量太多了。为了不让依赖关系破坏UML图，你必须对其进行精心选择，
仅展示那些对于沟通你的想法来说重要的依赖关系。

# 关联

`关联`是一个对象使用另一对象或与另一对象进行交互的关系。

`关联`可视为一种`特殊类型`的`依赖`。即一个对象总是拥有访问与其交互的对象的权限

- `关联`举例（当然关联也属于依赖）
  - 成员变量
  - 接口返回的对象

![](https://cdn.jsdelivr.net/gh/guosonglu/images@master/blog-img/202111171756754.png)

上图表示教授与学生进行交流。

# 聚合

`聚合`是一种特殊的关联。一般表示`一个对象`拥有`一组其它对象`。

聚合扮演的是容器的角色，组件可以独立于容器存在

![](https://cdn.jsdelivr.net/gh/guosonglu/images@master/blog-img/202111171820628.png)

上图表示院系包含教授,但教授可以独立于院系存在

# 组合

`组合`是一种特殊的聚合。表示一个对象由一个或多个其它对象组成。

`组合`和`聚合`的区别体现在语义上，不体现在代码上。

![](https://cdn.jsdelivr.net/gh/guosonglu/images@master/blog-img/20211117230829.png)

大学由院系构成,院系不能脱离大学独立存在


