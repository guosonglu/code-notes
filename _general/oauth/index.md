---
layout: default
title: OAuth2
nav_order: 50
---

# 概述

参考书籍：[OAuth 2实战](https://book.douban.com/subject/30487753/)

## 什么是Oauth2

OAuth 2.0 是一个`授权协议`，

它允许`软件应用`代表（而不是充当）`资源拥有者`去访问`资源拥有者的资源`。

`应用`向资源拥有者`请求授权`，然后取得`令牌（token）`，并用它来访问资源。

## 相关组件

![](https://cdn.jsdelivr.net/gh/guosonglu/images@master/blog-img/202112280938819.png)

- `资源拥有者`：有权使用API，可以将API访问权委托出去
- `受保护资源`：资源拥有者有权访问的组件
- `客户端`：使用受保护资源的软件

## 非授权访问

这些方式都存在一些局限性

- 客户端和受保护资源共享密钥
- 客户端向资源拥有者索要密钥
- 客户端使用`开发者密钥`。让开发者使用密钥直接调用受保护资源
- 给资源拥有者一个独立于用户密码的`特殊密码`供客户端使用

## 授权访问

授权访问引入了新组件：`授权服务器`

![](https://cdn.jsdelivr.net/gh/guosonglu/images@master/blog-img/202112281105339.png)


- 为了获取令牌，客户端首先将`资源拥有者`引导至`授权服务器`
- `授权服务器`先对`资源拥有者`进行身份认证
- 让资源拥有者选择是否对客户端授权
- 一旦授权请求被许可，客户端就可以向授权服务器请求访问令牌。
- 按照资源拥有者的许可，客户端可以使用该令牌对受保护资源上的API进行访问

![](https://cdn.jsdelivr.net/gh/guosonglu/images@master/blog-img/202112290851216.png)




